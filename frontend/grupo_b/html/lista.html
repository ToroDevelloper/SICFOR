<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lista de Estudiantes</title>
  <link rel="stylesheet" href="../css/lista.css">
</head>
<body>
  <h1>Lista de Estudiantes</h1>

  <!-- Contenedor donde se renderizar치 la lista -->
  <ul id="lista-estudiantes"></ul>

  <!-- Bot칩n para ir al registro -->
  <a href="registro.html">Registrar nuevo estudiante</a>

  <!-- Script de conexi칩n -->
  <script src="../js/index.js"></script>
  <script>
    // Llamamos la funci칩n que ya definimos en index.js
    cargarEstudiantes().then(estudiantes => {
      const lista = document.getElementById('lista-estudiantes');
      lista.innerHTML = '';

      estudiantes.forEach(est => {
        const item = document.createElement('li');
        // Link hacia perfil.html con el id del estudiante
        item.innerHTML = `
          <a href="perfil.html?id=${est.id}">
            ${est.nombres} ${est.apellidos} - ${est.email}
          </a>
        `;
        lista.appendChild(item);
      });
    }).catch(err => {
      console.error(err);
      document.getElementById('lista-estudiantes').innerHTML = '<li>Error al cargar estudiantes</li>';
    });
  </script>
</body>
</html>